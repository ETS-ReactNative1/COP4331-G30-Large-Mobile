{"version":3,"sources":["SignUpButtonComponent.js"],"names":["SignUpButtonComponent","signUpClick","props","onUsernameValidChange","onPasswordValidChange","onEmailValidChange","onMessageChange","isInputValid","obj","firstName","global","trim","lastName","username","phone","email","password","js","JSON","stringify","fetch","method","body","headers","response","text","res","parse","onEmailSentChange","message","styles","container","style","signUp_Button","signUp_Text","length","reg","emailReg","phoneReg1","phoneReg2","RegExp","test","includes","onPhoneValidChange","Component","StyleSheet","create","top","height","position","backgroundColor","borderRadius","left","width","fontFamily","color","fontSize","textAlign","right"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { StyleSheet, TouchableOpacity, Text } from \"react-native\";\n\nexport default class SignUpButtonComponent extends Component {\n  render() {\n    return (\n      <TouchableOpacity style={[styles.container, this.props.style]}>\n        <TouchableOpacity\n          //onPress={() => console.log(\"Navigate to Untitled\")}\n          onPress = {() => this.signUpClick(this.props)}\n          style={styles.signUp_Button}\n        >\n          <Text style={styles.signUp_Text}>Sign Up</Text>\n        </TouchableOpacity>\n      </TouchableOpacity>\n    );\n  }\n\n  signUpClick = async (props) =>\n  {\n    try \n    {\n      // Reset attributes\n      props.onUsernameValidChange(true);\n      props.onPasswordValidChange(true);\n      props.onEmailValidChange(true);\n      props.onMessageChange(\"\");\n\n      if (!this.isInputValid(props))\n      {\n        return;\n      }\n\n      // Get all relevant information\n      var obj = {\n        firstName:global.firstName.trim(),\n        lastName:global.lastName.trim(),\n        username:global.username.trim(),\n        phone:global.phone.trim(),\n        email:global.email.trim(),\n        password:global.password.trim()\n      };\n\n      // Request user info\n      var js = JSON.stringify(obj); \n      const response = await fetch('https://cop4331-g30-large.herokuapp.com/api/register', \n      {method:'POST',body:js,headers:{'Content-Type': 'application/json'}}); \n      var res = JSON.parse(await response.text());\n\n      props.onEmailSentChange(true);\n\n      //global.firstName = res.firstName;\n      //global.lastName = res.lastName; \n      //global.userId = res.id.toString();\n\n      // Navigate to dashboard\n      //console.log(\"Navigate to Dashboard\");\n      //props.navigation.navigate('Dashboard');\n    } \n    catch(e) \n    {\n      props.onMessageChange(e.message); \n      //console.log(e.message);\n    }\n  }\n\n  // Determines registration input validity\n  isInputValid(props)\n  {\n    // If required fields empty\n    if (global.username === \"\" || global.password === \"\" || global.email === \"\")\n    {\n      props.onMessageChange(\"Required fields not filled\");\n\n      if (global.username === \"\")\n        props.onUsernameValidChange(false);\n\n      if (global.password === \"\")\n        props.onPasswordValidChange(false);\n\n      if (global.email === \"\")\n        props.onEmailValidChange(false);\n\n      return false;\n    }\n    else\n    {\n        props.onUsernameValidChange(true);\n        props.onPasswordValidChange(true);\n        props.onEmailValidChange(true);\n    }\n\n    // Password not long enough\n    if (global.password.length < 5)\n    {\n      props.onMessageChange(\"Password must be 5 or more characters\");\n      props.onPasswordValidChange(false);\n      return false;\n    }\n    else\n    {\n      props.onPasswordValidChange(true);\n    }\n\n    var reg;\n    //const emailReg = \"/\\S+@\\S+\\.\\S+/\";\n    const emailReg = '[^@ \\t\\r\\n]+@[^@ \\t\\r\\n]+\\.[^@ \\t\\r\\n]+';\n    const phoneReg1 = '[0-9]{3}-[0-9]{3}-[0-9]{4}';\n    const phoneReg2 = '[0-9]{10}';\n\n    reg = new RegExp(emailReg);\n\n    // Invalid email\n    if (!reg.test(global.email))\n    {\n      props.onMessageChange(\"Invalid email address\");\n      props.onEmailValidChange(false);\n      return false;\n    }\n    else\n    {\n      props.onEmailValidChange(true);\n    }\n\n    // If phone not empty\n    if (global.phone.length != 0)\n    {\n      // Includes dashes\n      if (global.phone.includes('-'))\n      {\n        reg = new RegExp(phoneReg1);\n\n        // Invalid phone w/ dashes\n        if (!reg.test(global.phone) || global.phone.length != 12)\n        {\n          props.onMessageChange(\"Invalid phone number\");\n          props.onPhoneValidChange(false);\n          return false;\n        }\n        else\n        {\n          props.onPhoneValidChange(true);\n        }\n      }\n      else\n      {\n        reg = new RegExp(phoneReg2);\n\n        // Invalid phone w/ no dashes\n        if (!reg.test(global.phone) || global.phone.length != 10)\n        {\n          props.onMessageChange(\"Invalid phone number\");\n          props.onPhoneValidChange(false);\n          return false;\n        }\n        else\n        {\n          props.onPhoneValidChange(true);\n        }\n      }\n    }\n\n    return true;\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {},\n  signUp_Button: {\n    top: \"0%\",\n    height: \"100%\",\n    position: \"absolute\",\n    backgroundColor: \"rgba(15,163,177,1)\",\n    borderRadius: 50,\n    left: 0,\n    width: \"100%\"\n  },\n  signUp_Text: {\n    top: \"25%\",\n    left: 0,\n    position: \"absolute\",\n    fontFamily: \"roboto-regular\",\n    color: \"rgba(255,255,255,1)\",\n    fontSize: 16,\n    textAlign: \"center\",\n    right: 0\n  }\n});\n"]}