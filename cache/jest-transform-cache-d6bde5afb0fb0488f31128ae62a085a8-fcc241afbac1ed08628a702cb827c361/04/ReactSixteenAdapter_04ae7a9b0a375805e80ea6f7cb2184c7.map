{"version":3,"mappings":"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","names":["is164","TestUtils","Simulate","touchStart","is165","auxClick","is166","React","unstable_AsyncMode","is168","act","hasShouldComponentUpdateBug","semver","satisfies","testRendererVersion","FiberTags","nodeAndSiblingsArray","nodeWithSibling","array","node","push","sibling","flatten","arr","result","stack","i","length","n","pop","el","Array","isArray","nodeTypeFromType","type","Portal","isMemo","Memo","isLazy","Lazy","unmemoType","transformSuspense","renderedEl","prerenderEl","suspenseFallback","children","props","fallback","replaceLazyWithFallback","propTypes","defaultProps","contextTypes","contextType","childContextTypes","FakeSuspense","isStateful","_inherits","_classCallCheck","_createClass","key","value","createElement","elementToTree","containerInfo","nodeType","ref","instance","rendered","toTree","vnode","tag","HostRoot","childrenToTree","child","HostPortal","stateNode","memoizedProps","ClassComponent","FunctionalComponent","MemoClass","elementType","MemoSFC","renderedNodes","map","HostComponent","HostText","Fragment","Mode","ContextProvider","ContextConsumer","Profiler","ForwardRef","pendingProps","Suspense","Error","nodeToHostNode","_node","mapper","item","ReactDOM","findDOMNode","eventOptions","animation","pointerEvents","getEmptyStateValue","EmptyState","Component","testRenderer","ShallowRenderer","render","_instance","state","wrapAct","fn","returnVal","getProviderDefaultValue","Provider","_context","_defaultValue","_currentValue","makeFakeElement","$$typeof","Element","prototype","isReactComponent","__reactAutoBindPairs","ReactSixteenAdapter","_this","lifecycles","options","enableComponentDidUpdateOnSetState","legacyContextMode","componentDidUpdate","onSetState","getDerivedStateFromProps","getSnapshotBeforeUpdate","setState","skipsComponentDidUpdateOnNullish","getChildContext","calledByRenderer","getDerivedStateFromError","TypeError","attachTo","hydrateIn","wrappingComponentProps","domNode","global","document","adapter","context","callback","wrapperProps","refProp","ReactWrapperComponent","wrappedEl","hydrate","setChildProps","unmount","unmountComponentAtNode","getNode","isCustomComponent","_reactInternalFiber","simulateError","nodeHierarchy","rootNode","error","isErrorBoundary","elInstance","componentDidCatch","find","catchingInstance","catchingType","displayNameOfNode","undefined","simulateEvent","event","mock","mappedEvent","eventFn","batchedUpdates","getWrappingComponentRenderer","inst","getMountWrapperInstance","wrapInvoke","renderer","isDOM","cachedNode","lastComponent","wrappedComponent","sentinel","wrapPureComponent","compare","RangeError","shouldComponentUpdate","nextProps","_this2","isPureReactComponent","memoized","prevProps","shouldUpdate","args","arguments","displayName","wrapFunctionalComponent","renderElement","elConfig","rest","typeIsExisted","clonedEl","elementIsChanged","unmaskedContext","providerValues","Map","set","MockProvider","getProviderFromConsumer","has","get","MockConsumer","InnerComp","isComponentStateful","originalMethod","_updateClassComponent","clonedProps","apply","restore","emptyStateValue","Object","defineProperty","configurable","enumerable","writable","output","getRenderOutput","concat","handler","checkPropTypes","typeSpecs","values","location","hierarchy","ContextWrapper","ReactDOMServer","renderToStaticMarkup","mode","EnzymeAdapter","MODES","MOUNT","createMountRenderer","SHALLOW","createShallowRenderer","STRING","createStringRenderer","element","_typeof","matchingType","supportsArray","nodes","ConcurrentMode","AsyncMode","NaN","StrictMode","$$typeofType","nodeName","name","object","fragment","fakeElement","isValidElement","Consumer","RootFinder","module","exports"],"sources":["../src/ReactSixteenAdapter.js"],"sourcesContent":["/* eslint no-use-before-define: 0 */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-unresolved\nimport ReactDOMServer from 'react-dom/server';\n// eslint-disable-next-line import/no-unresolved\nimport ShallowRenderer from 'react-test-renderer/shallow';\nimport { version as testRendererVersion } from 'react-test-renderer/package.json';\n// eslint-disable-next-line import/no-unresolved\nimport TestUtils from 'react-dom/test-utils';\nimport semver from 'semver';\nimport checkPropTypes from 'prop-types/checkPropTypes';\nimport has from 'has';\nimport {\n  AsyncMode,\n  ConcurrentMode,\n  ContextConsumer,\n  ContextProvider,\n  Element,\n  ForwardRef,\n  Fragment,\n  isContextConsumer,\n  isContextProvider,\n  isElement,\n  isForwardRef,\n  isPortal,\n  isSuspense,\n  isValidElementType,\n  Lazy,\n  Memo,\n  Portal,\n  Profiler,\n  StrictMode,\n  Suspense,\n} from 'react-is';\nimport { EnzymeAdapter } from 'enzyme';\nimport { typeOfNode } from 'enzyme/build/Utils';\nimport shallowEqual from 'enzyme-shallow-equal';\nimport {\n  displayNameOfNode,\n  elementToTree as utilElementToTree,\n  nodeTypeFromType as utilNodeTypeFromType,\n  mapNativeEventNames,\n  propFromEvent,\n  assertDomAvailable,\n  withSetStateAllowed,\n  createRenderWrapper,\n  createMountWrapper,\n  propsWithKeysAndRef,\n  ensureKeyOrUndefined,\n  simulateError,\n  wrap,\n  getMaskedContext,\n  getComponentStack,\n  RootFinder,\n  getNodeFromRootFinder,\n  wrapWithWrappingComponent,\n  getWrappingComponentMountRenderer,\n  compareNodeTypeOf,\n  spyMethod,\n} from 'enzyme-adapter-utils';\nimport findCurrentFiberUsingSlowPath from './findCurrentFiberUsingSlowPath';\nimport detectFiberTags from './detectFiberTags';\n\nconst is164 = !!TestUtils.Simulate.touchStart; // 16.4+\nconst is165 = !!TestUtils.Simulate.auxClick; // 16.5+\nconst is166 = is165 && !React.unstable_AsyncMode; // 16.6+\nconst is168 = is166 && typeof TestUtils.act === 'function';\n\nconst hasShouldComponentUpdateBug = semver.satisfies(testRendererVersion, '< 16.8');\n\n// Lazily populated if DOM is available.\nlet FiberTags = null;\n\nfunction nodeAndSiblingsArray(nodeWithSibling) {\n  const array = [];\n  let node = nodeWithSibling;\n  while (node != null) {\n    array.push(node);\n    node = node.sibling;\n  }\n  return array;\n}\n\nfunction flatten(arr) {\n  const result = [];\n  const stack = [{ i: 0, array: arr }];\n  while (stack.length) {\n    const n = stack.pop();\n    while (n.i < n.array.length) {\n      const el = n.array[n.i];\n      n.i += 1;\n      if (Array.isArray(el)) {\n        stack.push(n);\n        stack.push({ i: 0, array: el });\n        break;\n      }\n      result.push(el);\n    }\n  }\n  return result;\n}\n\nfunction nodeTypeFromType(type) {\n  if (type === Portal) {\n    return 'portal';\n  }\n\n  return utilNodeTypeFromType(type);\n}\n\nfunction isMemo(type) {\n  return compareNodeTypeOf(type, Memo);\n}\n\nfunction isLazy(type) {\n  return compareNodeTypeOf(type, Lazy);\n}\n\nfunction unmemoType(type) {\n  return isMemo(type) ? type.type : type;\n}\n\nfunction transformSuspense(renderedEl, prerenderEl, { suspenseFallback }) {\n  if (!isSuspense(renderedEl)) {\n    return renderedEl;\n  }\n\n  let { children } = renderedEl.props;\n\n  if (suspenseFallback) {\n    const { fallback } = renderedEl.props;\n    children = replaceLazyWithFallback(children, fallback);\n  }\n\n  const {\n    propTypes,\n    defaultProps,\n    contextTypes,\n    contextType,\n    childContextTypes,\n  } = renderedEl.type;\n\n  const FakeSuspense = Object.assign(\n    isStateful(prerenderEl.type)\n      ? class FakeSuspense extends prerenderEl.type {\n        render() {\n          const { type, props } = prerenderEl;\n          return React.createElement(\n            type,\n            { ...props, ...this.props },\n            children,\n          );\n        }\n      }\n      : function FakeSuspense(props) { // eslint-disable-line prefer-arrow-callback\n        return React.createElement(\n          renderedEl.type,\n          { ...renderedEl.props, ...props },\n          children,\n        );\n      },\n    {\n      propTypes,\n      defaultProps,\n      contextTypes,\n      contextType,\n      childContextTypes,\n    },\n  );\n  return React.createElement(FakeSuspense, null, children);\n}\n\nfunction elementToTree(el) {\n  if (!isPortal(el)) {\n    return utilElementToTree(el, elementToTree);\n  }\n\n  const { children, containerInfo } = el;\n  const props = { children, containerInfo };\n\n  return {\n    nodeType: 'portal',\n    type: Portal,\n    props,\n    key: ensureKeyOrUndefined(el.key),\n    ref: el.ref || null,\n    instance: null,\n    rendered: elementToTree(el.children),\n  };\n}\n\nfunction toTree(vnode) {\n  if (vnode == null) {\n    return null;\n  }\n  // TODO(lmr): I'm not really sure I understand whether or not this is what\n  // i should be doing, or if this is a hack for something i'm doing wrong\n  // somewhere else. Should talk to sebastian about this perhaps\n  const node = findCurrentFiberUsingSlowPath(vnode);\n  switch (node.tag) {\n    case FiberTags.HostRoot:\n      return childrenToTree(node.child);\n    case FiberTags.HostPortal: {\n      const {\n        stateNode: { containerInfo },\n        memoizedProps: children,\n      } = node;\n      const props = { containerInfo, children };\n      return {\n        nodeType: 'portal',\n        type: Portal,\n        props,\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.ClassComponent:\n      return {\n        nodeType: 'class',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.FunctionalComponent:\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    case FiberTags.MemoClass:\n      return {\n        nodeType: 'class',\n        type: node.elementType.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: childrenToTree(node.child.child),\n      };\n    case FiberTags.MemoSFC: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'function',\n        type: node.elementType,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostComponent: {\n      let renderedNodes = flatten(nodeAndSiblingsArray(node.child).map(toTree));\n      if (renderedNodes.length === 0) {\n        renderedNodes = [node.memoizedProps.children];\n      }\n      return {\n        nodeType: 'host',\n        type: node.type,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: node.stateNode,\n        rendered: renderedNodes,\n      };\n    }\n    case FiberTags.HostText:\n      return node.memoizedProps;\n    case FiberTags.Fragment:\n    case FiberTags.Mode:\n    case FiberTags.ContextProvider:\n    case FiberTags.ContextConsumer:\n      return childrenToTree(node.child);\n    case FiberTags.Profiler:\n    case FiberTags.ForwardRef: {\n      return {\n        nodeType: 'function',\n        type: node.type,\n        props: { ...node.pendingProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Suspense: {\n      return {\n        nodeType: 'function',\n        type: Suspense,\n        props: { ...node.memoizedProps },\n        key: ensureKeyOrUndefined(node.key),\n        ref: node.ref,\n        instance: null,\n        rendered: childrenToTree(node.child),\n      };\n    }\n    case FiberTags.Lazy:\n      return childrenToTree(node.child);\n    default:\n      throw new Error(`Enzyme Internal Error: unknown node with tag ${node.tag}`);\n  }\n}\n\nfunction childrenToTree(node) {\n  if (!node) {\n    return null;\n  }\n  const children = nodeAndSiblingsArray(node);\n  if (children.length === 0) {\n    return null;\n  }\n  if (children.length === 1) {\n    return toTree(children[0]);\n  }\n  return flatten(children.map(toTree));\n}\n\nfunction nodeToHostNode(_node) {\n  // NOTE(lmr): node could be a function component\n  // which wont have an instance prop, but we can get the\n  // host node associated with its return value at that point.\n  // Although this breaks down if the return value is an array,\n  // as is possible with React 16.\n  let node = _node;\n  while (node && !Array.isArray(node) && node.instance === null) {\n    node = node.rendered;\n  }\n  // if the SFC returned null effectively, there is no host node.\n  if (!node) {\n    return null;\n  }\n\n  const mapper = (item) => {\n    if (item && item.instance) return ReactDOM.findDOMNode(item.instance);\n    return null;\n  };\n  if (Array.isArray(node)) {\n    return node.map(mapper);\n  }\n  if (Array.isArray(node.rendered) && node.nodeType === 'class') {\n    return node.rendered.map(mapper);\n  }\n  return mapper(node);\n}\n\nfunction replaceLazyWithFallback(node, fallback) {\n  if (!node) {\n    return null;\n  }\n  if (Array.isArray(node)) {\n    return node.map((el) => replaceLazyWithFallback(el, fallback));\n  }\n  if (isLazy(node.type)) {\n    return fallback;\n  }\n  return {\n    ...node,\n    props: {\n      ...node.props,\n      children: replaceLazyWithFallback(node.props.children, fallback),\n    },\n  };\n}\n\nconst eventOptions = {\n  animation: true,\n  pointerEvents: is164,\n  auxClick: is165,\n};\n\nfunction getEmptyStateValue() {\n  // this handles a bug in React 16.0 - 16.2\n  // see https://github.com/facebook/react/commit/39be83565c65f9c522150e52375167568a2a1459\n  // also see https://github.com/facebook/react/pull/11965\n\n  // eslint-disable-next-line react/prefer-stateless-function\n  class EmptyState extends React.Component {\n    render() {\n      return null;\n    }\n  }\n  const testRenderer = new ShallowRenderer();\n  testRenderer.render(React.createElement(EmptyState));\n  return testRenderer._instance.state;\n}\n\nfunction wrapAct(fn) {\n  if (!is168) {\n    return fn();\n  }\n  let returnVal;\n  TestUtils.act(() => { returnVal = fn(); });\n  return returnVal;\n}\n\nfunction getProviderDefaultValue(Provider) {\n  // React stores references to the Provider's defaultValue differently across versions.\n  if ('_defaultValue' in Provider._context) {\n    return Provider._context._defaultValue;\n  }\n  if ('_currentValue' in Provider._context) {\n    return Provider._context._currentValue;\n  }\n  throw new Error('Enzyme Internal Error: can’t figure out how to get Provider’s default value');\n}\n\nfunction makeFakeElement(type) {\n  return { $$typeof: Element, type };\n}\n\nfunction isStateful(Component) {\n  return Component.prototype && (\n    Component.prototype.isReactComponent\n    || Array.isArray(Component.__reactAutoBindPairs) // fallback for createClass components\n  );\n}\n\nclass ReactSixteenAdapter extends EnzymeAdapter {\n  constructor() {\n    super();\n    const { lifecycles } = this.options;\n    this.options = {\n      ...this.options,\n      enableComponentDidUpdateOnSetState: true, // TODO: remove, semver-major\n      legacyContextMode: 'parent',\n      lifecycles: {\n        ...lifecycles,\n        componentDidUpdate: {\n          onSetState: true,\n        },\n        getDerivedStateFromProps: {\n          hasShouldComponentUpdateBug,\n        },\n        getSnapshotBeforeUpdate: true,\n        setState: {\n          skipsComponentDidUpdateOnNullish: true,\n        },\n        getChildContext: {\n          calledByRenderer: false,\n        },\n        getDerivedStateFromError: is166,\n      },\n    };\n  }\n\n  createMountRenderer(options) {\n    assertDomAvailable('mount');\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` is not supported by the `mount` renderer');\n    }\n    if (FiberTags === null) {\n      // Requires DOM.\n      FiberTags = detectFiberTags();\n    }\n    const { attachTo, hydrateIn, wrappingComponentProps } = options;\n    const domNode = hydrateIn || attachTo || global.document.createElement('div');\n    let instance = null;\n    const adapter = this;\n    return {\n      render(el, context, callback) {\n        return wrapAct(() => {\n          if (instance === null) {\n            const { type, props, ref } = el;\n            const wrapperProps = {\n              Component: type,\n              props,\n              wrappingComponentProps,\n              context,\n              ...(ref && { refProp: ref }),\n            };\n            const ReactWrapperComponent = createMountWrapper(el, { ...options, adapter });\n            const wrappedEl = React.createElement(ReactWrapperComponent, wrapperProps);\n            instance = hydrateIn\n              ? ReactDOM.hydrate(wrappedEl, domNode)\n              : ReactDOM.render(wrappedEl, domNode);\n            if (typeof callback === 'function') {\n              callback();\n            }\n          } else {\n            instance.setChildProps(el.props, context, callback);\n          }\n        });\n      },\n      unmount() {\n        ReactDOM.unmountComponentAtNode(domNode);\n        instance = null;\n      },\n      getNode() {\n        if (!instance) {\n          return null;\n        }\n        return getNodeFromRootFinder(\n          adapter.isCustomComponent,\n          toTree(instance._reactInternalFiber),\n          options,\n        );\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        const isErrorBoundary = ({ instance: elInstance, type }) => {\n          if (is166 && type && type.getDerivedStateFromError) {\n            return true;\n          }\n          return elInstance && elInstance.componentDidCatch;\n        };\n\n        const {\n          instance: catchingInstance,\n          type: catchingType,\n        } = nodeHierarchy.find(isErrorBoundary) || {};\n\n        simulateError(\n          error,\n          catchingInstance,\n          rootNode,\n          nodeHierarchy,\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          is166 ? catchingType : undefined,\n        );\n      },\n      simulateEvent(node, event, mock) {\n        const mappedEvent = mapNativeEventNames(event, eventOptions);\n        const eventFn = TestUtils.Simulate[mappedEvent];\n        if (!eventFn) {\n          throw new TypeError(`ReactWrapper::simulate() event '${event}' does not exist`);\n        }\n        wrapAct(() => {\n          eventFn(adapter.nodeToHostNode(node), mock);\n        });\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      getWrappingComponentRenderer() {\n        return {\n          ...this,\n          ...getWrappingComponentMountRenderer({\n            toTree: (inst) => toTree(inst._reactInternalFiber),\n            getMountWrapperInstance: () => instance,\n          }),\n        };\n      },\n      ...(is168 && { wrapInvoke: wrapAct }),\n    };\n  }\n\n  createShallowRenderer(options = {}) {\n    const adapter = this;\n    const renderer = new ShallowRenderer();\n    const { suspenseFallback } = options;\n    if (typeof suspenseFallback !== 'undefined' && typeof suspenseFallback !== 'boolean') {\n      throw TypeError('`options.suspenseFallback` should be boolean or undefined');\n    }\n    let isDOM = false;\n    let cachedNode = null;\n\n    let lastComponent = null;\n    let wrappedComponent = null;\n    const sentinel = {};\n\n    // wrap memo components with a PureComponent, or a class component with sCU\n    const wrapPureComponent = (Component, compare) => {\n      if (!is166) {\n        throw new RangeError('this function should not be called in React < 16.6. Please report this!');\n      }\n      if (lastComponent !== Component) {\n        if (isStateful(Component)) {\n          wrappedComponent = class extends Component {}; // eslint-disable-line react/prefer-stateless-function\n          if (compare) {\n            wrappedComponent.prototype.shouldComponentUpdate = (nextProps) => !compare(this.props, nextProps);\n          } else {\n            wrappedComponent.prototype.isPureReactComponent = true;\n          }\n        } else {\n          let memoized = sentinel;\n          let prevProps;\n          wrappedComponent = function (props, ...args) {\n            const shouldUpdate = memoized === sentinel || (compare\n              ? !compare(prevProps, props)\n              : !shallowEqual(prevProps, props)\n            );\n            if (shouldUpdate) {\n              memoized = Component({ ...Component.defaultProps, ...props }, ...args);\n              prevProps = props;\n            }\n            return memoized;\n          };\n        }\n        Object.assign(\n          wrappedComponent,\n          Component,\n          { displayName: adapter.displayNameOfNode({ type: Component }) },\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    // Wrap functional components on versions prior to 16.5,\n    // to avoid inadvertently pass a `this` instance to it.\n    const wrapFunctionalComponent = (Component) => {\n      if (is166 && has(Component, 'defaultProps')) {\n        if (lastComponent !== Component) {\n          wrappedComponent = Object.assign(\n            // eslint-disable-next-line new-cap\n            (props, ...args) => Component({ ...Component.defaultProps, ...props }, ...args),\n            Component,\n            { displayName: adapter.displayNameOfNode({ type: Component }) },\n          );\n          lastComponent = Component;\n        }\n        return wrappedComponent;\n      }\n      if (is165) {\n        return Component;\n      }\n\n      if (lastComponent !== Component) {\n        wrappedComponent = Object.assign(\n          (...args) => Component(...args), // eslint-disable-line new-cap\n          Component,\n        );\n        lastComponent = Component;\n      }\n      return wrappedComponent;\n    };\n\n    const renderElement = (elConfig, ...rest) => {\n      const renderedEl = renderer.render(elConfig, ...rest);\n\n      const typeIsExisted = !!(renderedEl && renderedEl.type);\n      if (is166 && typeIsExisted) {\n        const clonedEl = transformSuspense(renderedEl, elConfig, { suspenseFallback });\n\n        const elementIsChanged = clonedEl.type !== renderedEl.type;\n        if (elementIsChanged) {\n          return renderer.render({ ...elConfig, type: clonedEl.type }, ...rest);\n        }\n      }\n\n      return renderedEl;\n    };\n\n    return {\n      render(el, unmaskedContext, {\n        providerValues = new Map(),\n      } = {}) {\n        cachedNode = el;\n        /* eslint consistent-return: 0 */\n        if (typeof el.type === 'string') {\n          isDOM = true;\n        } else if (isContextProvider(el)) {\n          providerValues.set(el.type, el.props.value);\n          const MockProvider = Object.assign(\n            (props) => props.children,\n            el.type,\n          );\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockProvider }));\n        } else if (isContextConsumer(el)) {\n          const Provider = adapter.getProviderFromConsumer(el.type);\n          const value = providerValues.has(Provider)\n            ? providerValues.get(Provider)\n            : getProviderDefaultValue(Provider);\n          const MockConsumer = Object.assign(\n            (props) => props.children(value),\n            el.type,\n          );\n          return withSetStateAllowed(() => renderElement({ ...el, type: MockConsumer }));\n        } else {\n          isDOM = false;\n          let renderedEl = el;\n          if (isLazy(renderedEl)) {\n            throw TypeError('`React.lazy` is not supported by shallow rendering.');\n          }\n\n          renderedEl = transformSuspense(renderedEl, renderedEl, { suspenseFallback });\n          const { type: Component } = renderedEl;\n\n          const context = getMaskedContext(Component.contextTypes, unmaskedContext);\n\n          if (isMemo(el.type)) {\n            const { type: InnerComp, compare } = el.type;\n\n            return withSetStateAllowed(() => renderElement(\n              { ...el, type: wrapPureComponent(InnerComp, compare) },\n              context,\n            ));\n          }\n\n          const isComponentStateful = isStateful(Component);\n\n          if (!isComponentStateful && typeof Component === 'function') {\n            return withSetStateAllowed(() => renderElement(\n              { ...renderedEl, type: wrapFunctionalComponent(Component) },\n              context,\n            ));\n          }\n\n          if (isComponentStateful) {\n            if (\n              renderer._instance\n              && el.props === renderer._instance.props\n              && !shallowEqual(context, renderer._instance.context)\n            ) {\n              const { restore } = spyMethod(\n                renderer,\n                '_updateClassComponent',\n                (originalMethod) => function _updateClassComponent(...args) {\n                  const { props } = renderer._instance;\n                  const clonedProps = { ...props };\n                  renderer._instance.props = clonedProps;\n\n                  const result = originalMethod.apply(renderer, args);\n\n                  renderer._instance.props = props;\n                  restore();\n\n                  return result;\n                },\n              );\n            }\n\n            // fix react bug; see implementation of `getEmptyStateValue`\n            const emptyStateValue = getEmptyStateValue();\n            if (emptyStateValue) {\n              Object.defineProperty(Component.prototype, 'state', {\n                configurable: true,\n                enumerable: true,\n                get() {\n                  return null;\n                },\n                set(value) {\n                  if (value !== emptyStateValue) {\n                    Object.defineProperty(this, 'state', {\n                      configurable: true,\n                      enumerable: true,\n                      value,\n                      writable: true,\n                    });\n                  }\n                  return true;\n                },\n              });\n            }\n          }\n          return withSetStateAllowed(() => renderElement(renderedEl, context));\n        }\n      },\n      unmount() {\n        renderer.unmount();\n      },\n      getNode() {\n        if (isDOM) {\n          return elementToTree(cachedNode);\n        }\n        const output = renderer.getRenderOutput();\n        return {\n          nodeType: nodeTypeFromType(cachedNode.type),\n          type: cachedNode.type,\n          props: cachedNode.props,\n          key: ensureKeyOrUndefined(cachedNode.key),\n          ref: cachedNode.ref,\n          instance: renderer._instance,\n          rendered: Array.isArray(output)\n            ? flatten(output).map((el) => elementToTree(el))\n            : elementToTree(output),\n        };\n      },\n      simulateError(nodeHierarchy, rootNode, error) {\n        simulateError(\n          error,\n          renderer._instance,\n          cachedNode,\n          nodeHierarchy.concat(cachedNode),\n          nodeTypeFromType,\n          adapter.displayNameOfNode,\n          is166 ? cachedNode.type : undefined,\n        );\n      },\n      simulateEvent(node, event, ...args) {\n        const handler = node.props[propFromEvent(event, eventOptions)];\n        if (handler) {\n          withSetStateAllowed(() => {\n            // TODO(lmr): create/use synthetic events\n            // TODO(lmr): emulate React's event propagation\n            // ReactDOM.unstable_batchedUpdates(() => {\n            handler(...args);\n            // });\n          });\n        }\n      },\n      batchedUpdates(fn) {\n        return fn();\n        // return ReactDOM.unstable_batchedUpdates(fn);\n      },\n      checkPropTypes(typeSpecs, values, location, hierarchy) {\n        return checkPropTypes(\n          typeSpecs,\n          values,\n          location,\n          displayNameOfNode(cachedNode),\n          () => getComponentStack(hierarchy.concat([cachedNode])),\n        );\n      },\n    };\n  }\n\n  createStringRenderer(options) {\n    if (has(options, 'suspenseFallback')) {\n      throw new TypeError('`suspenseFallback` should not be specified in options of string renderer');\n    }\n    return {\n      render(el, context) {\n        if (options.context && (el.type.contextTypes || options.childContextTypes)) {\n          const childContextTypes = {\n            ...(el.type.contextTypes || {}),\n            ...options.childContextTypes,\n          };\n          const ContextWrapper = createRenderWrapper(el, context, childContextTypes);\n          return ReactDOMServer.renderToStaticMarkup(React.createElement(ContextWrapper));\n        }\n        return ReactDOMServer.renderToStaticMarkup(el);\n      },\n    };\n  }\n\n  // Provided a bag of options, return an `EnzymeRenderer`. Some options can be implementation\n  // specific, like `attach` etc. for React, but not part of this interface explicitly.\n  // eslint-disable-next-line class-methods-use-this\n  createRenderer(options) {\n    switch (options.mode) {\n      case EnzymeAdapter.MODES.MOUNT: return this.createMountRenderer(options);\n      case EnzymeAdapter.MODES.SHALLOW: return this.createShallowRenderer(options);\n      case EnzymeAdapter.MODES.STRING: return this.createStringRenderer(options);\n      default:\n        throw new Error(`Enzyme Internal Error: Unrecognized mode: ${options.mode}`);\n    }\n  }\n\n  wrap(element) {\n    return wrap(element);\n  }\n\n  // converts an RSTNode to the corresponding JSX Pragma Element. This will be needed\n  // in order to implement the `Wrapper.mount()` and `Wrapper.shallow()` methods, but should\n  // be pretty straightforward for people to implement.\n  // eslint-disable-next-line class-methods-use-this\n  nodeToElement(node) {\n    if (!node || typeof node !== 'object') return null;\n    const { type } = node;\n    return React.createElement(unmemoType(type), propsWithKeysAndRef(node));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  matchesElementType(node, matchingType) {\n    if (!node) {\n      return node;\n    }\n    const { type } = node;\n    return unmemoType(type) === unmemoType(matchingType);\n  }\n\n  elementToNode(element) {\n    return elementToTree(element);\n  }\n\n  nodeToHostNode(node, supportsArray = false) {\n    const nodes = nodeToHostNode(node);\n    if (Array.isArray(nodes) && !supportsArray) {\n      return nodes[0];\n    }\n    return nodes;\n  }\n\n  displayNameOfNode(node) {\n    if (!node) return null;\n    const { type, $$typeof } = node;\n    const adapter = this;\n\n    const nodeType = type || $$typeof;\n\n    // newer node types may be undefined, so only test if the nodeType exists\n    if (nodeType) {\n      switch (nodeType) {\n        case (is166 ? ConcurrentMode : AsyncMode) || NaN: return is166 ? 'ConcurrentMode' : 'AsyncMode';\n        case Fragment || NaN: return 'Fragment';\n        case StrictMode || NaN: return 'StrictMode';\n        case Profiler || NaN: return 'Profiler';\n        case Portal || NaN: return 'Portal';\n        case Suspense || NaN: return 'Suspense';\n        default:\n      }\n    }\n\n    const $$typeofType = type && type.$$typeof;\n\n    switch ($$typeofType) {\n      case ContextConsumer || NaN: return 'ContextConsumer';\n      case ContextProvider || NaN: return 'ContextProvider';\n      case Memo || NaN: {\n        const nodeName = displayNameOfNode(node);\n        return typeof nodeName === 'string' ? nodeName : `Memo(${adapter.displayNameOfNode(type)})`;\n      }\n      case ForwardRef || NaN: {\n        if (type.displayName) {\n          return type.displayName;\n        }\n        const name = adapter.displayNameOfNode({ type: type.render });\n        return name ? `ForwardRef(${name})` : 'ForwardRef';\n      }\n      case Lazy || NaN: {\n        return 'lazy';\n      }\n      default: return displayNameOfNode(node);\n    }\n  }\n\n  isValidElement(element) {\n    return isElement(element);\n  }\n\n  isValidElementType(object) {\n    return !!object && isValidElementType(object);\n  }\n\n  isFragment(fragment) {\n    return typeOfNode(fragment) === Fragment;\n  }\n\n  isCustomComponent(type) {\n    const fakeElement = makeFakeElement(type);\n    return !!type && (\n      typeof type === 'function'\n      || isForwardRef(fakeElement)\n      || isContextProvider(fakeElement)\n      || isContextConsumer(fakeElement)\n      || isSuspense(fakeElement)\n    );\n  }\n\n  isContextConsumer(type) {\n    return !!type && isContextConsumer(makeFakeElement(type));\n  }\n\n  isCustomComponentElement(inst) {\n    if (!inst || !this.isValidElement(inst)) {\n      return false;\n    }\n    return this.isCustomComponent(inst.type);\n  }\n\n  getProviderFromConsumer(Consumer) {\n    // React stores references to the Provider on a Consumer differently across versions.\n    if (Consumer) {\n      let Provider;\n      if (Consumer._context) { // check this first, to avoid a deprecation warning\n        ({ Provider } = Consumer._context);\n      } else if (Consumer.Provider) {\n        ({ Provider } = Consumer);\n      }\n      if (Provider) {\n        return Provider;\n      }\n    }\n    throw new Error('Enzyme Internal Error: can’t figure out how to get Provider from Consumer');\n  }\n\n  createElement(...args) {\n    return React.createElement(...args);\n  }\n\n  wrapWithWrappingComponent(node, options) {\n    return {\n      RootFinder,\n      node: wrapWithWrappingComponent(React.createElement, node, options),\n    };\n  }\n}\n\nmodule.exports = ReactSixteenAdapter;\n"]}